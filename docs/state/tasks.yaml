version: 2
tasks:
  - id: "A1-setup-protocol"
    label: "Setup & Bootstrap BRAIN Protocol"
    goal: "Flesh out the brain-cli tool to be self-hosting. Specifically, implement the 'next', 'context', and 'verify' commands to operate on this YAML file structure."
    status: "completed"
    needs: []
    contextFiles:
      - "BRAIN.md"
      - "docs/scripts/src/main.rs"
      - "docs/scripts/src/context.rs"
      - "docs/scripts/src/verifier.rs"
      - "docs/scripts/src/model.rs"
      - "docs/state/tasks.yaml"
    acceptanceCriteria:
      - description: "The 'next' command should identify this task as unblocked."
        type: "test_pass"
        file: "brain-cli"
      - description: "The 'context A1-setup-protocol' command should print the content of all context files."
        type: "test_pass"
        file: "brain-cli"

  - id: "A2-implement-next-command"
    label: "Implement the 'next' command"
    goal: "Implement the logic for the 'next' command in brain-cli. It should read the tasks.yaml file, identify all tasks whose dependencies are met (i.e., all tasks in their 'needs' array have a status of 'completed'), and print their IDs and labels to the console."
    status: "pending"
    needs:
      - "A1-setup-protocol"
    contextFiles:
      - "docs/scripts/src/main.rs"
      - "docs/scripts/src/model.rs"
      - "docs/state/tasks.yaml"
    acceptanceCriteria:
      - description: "The 'next' command logic is implemented in a new module at 'docs/scripts/src/next.rs'."
        type: "file_exists"
        file: "docs/scripts/src/next.rs"
      - description: "The new 'next.rs' module is declared in 'main.rs'."
        type: "text_check"
        file: "docs/scripts/src/main.rs"
        assertion: "contains_string"
        value: "mod next;"
      - description: "The main command router calls 'next::run' for the Next command."
        type: "text_check"
        file: "docs/scripts/src/main.rs"
        assertion: "contains_string"
        value: "Commands::Next => next::run(&app_state)"